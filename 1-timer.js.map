{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  btn: document.querySelector('button[data-start]'),\n  days: document.querySelector('span[data-days]'),\n  hours: document.querySelector('span[data-hours]'),\n  minutes: document.querySelector('span[data-minutes]'),\n  seconds: document.querySelector('span[data-seconds]'),\n  inputDatetime: document.querySelector('input#datetime-picker'),\n};\n\nrefs.btn.disabled = true;\n\nlet userSelectedDate;\nlet timerInterval;\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction displayTimeLeft(deltaTime) {\n  const date = convertMs(deltaTime);\n  refs.days.textContent = addLeadingZero(date.days);\n  refs.hours.textContent = addLeadingZero(date.hours);\n  refs.minutes.textContent = addLeadingZero(date.minutes);\n  refs.seconds.textContent = addLeadingZero(date.seconds);\n}\n\nfunction intervalClear() {\n  if (timerInterval) {\n    clearInterval(timerInterval);\n    timerInterval = null;\n  }\n}\n\nfunction checkTimer() {\n  const date = userSelectedDate - new Date();\n  refs.btn.disabled = !(date > 0);\n  displayTimeLeft(!refs.btn.disabled ? date : 0);\n  return !refs.btn.disabled;\n}\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    if (!checkTimer()) {\n      iziToast.warning({\n        title: 'Caution',\n        message: 'Please choose a date in the future',\n      });\n    }\n    intervalClear();\n  },\n};\n\nflatpickr('input#datetime-picker', options);\n\nrefs.btn.addEventListener('click', event => {\n  intervalClear();\n\n  if (checkTimer()) {\n    refs.btn.disabled = true;\n    refs.inputDatetime.disabled = true;\n    iziToast.info({\n      title: 'Info',\n      message: 'Timer is start!',\n    });\n    timerInterval = setInterval(() => {\n      const currentDate = new Date();\n      const deltaTime = userSelectedDate - currentDate;\n      displayTimeLeft(deltaTime);\n      if (deltaTime < 1000) {\n        clearInterval(timerInterval);\n        displayTimeLeft(0);\n        refs.btn.disabled = false;\n        refs.inputDatetime.disabled = false;\n        iziToast.success({\n          title: 'OK',\n          message: 'End of timer',\n        });\n      }\n    }, 1000);\n  }\n});\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["refs","userSelectedDate","timerInterval","addLeadingZero","value","displayTimeLeft","deltaTime","date","convertMs","intervalClear","checkTimer","options","selectedDates","iziToast","flatpickr","event","ms","days","hours","minutes","seconds"],"mappings":"+IAKA,MAAMA,EAAO,CACX,IAAK,SAAS,cAAc,oBAAoB,EAChD,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,oBAAoB,EACpD,QAAS,SAAS,cAAc,oBAAoB,EACpD,cAAe,SAAS,cAAc,uBAAuB,CAC/D,EAEAA,EAAK,IAAI,SAAW,GAEpB,IAAIC,EACAC,EAEJ,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASC,EAAgBC,EAAW,CAClC,MAAMC,EAAOC,EAAUF,CAAS,EAChCN,EAAK,KAAK,YAAcG,EAAeI,EAAK,IAAI,EAChDP,EAAK,MAAM,YAAcG,EAAeI,EAAK,KAAK,EAClDP,EAAK,QAAQ,YAAcG,EAAeI,EAAK,OAAO,EACtDP,EAAK,QAAQ,YAAcG,EAAeI,EAAK,OAAO,CACxD,CAEA,SAASE,GAAgB,CACnBP,IACF,cAAcA,CAAa,EAC3BA,EAAgB,KAEpB,CAEA,SAASQ,GAAa,CACpB,MAAMH,EAAON,EAAmB,IAAI,KACpC,OAAAD,EAAK,IAAI,SAAW,EAAEO,EAAO,GAC7BF,EAAiBL,EAAK,IAAI,SAAkB,EAAPO,CAAQ,EACtC,CAACP,EAAK,IAAI,QACnB,CAEA,MAAMW,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBX,EAAmBW,EAAc,CAAC,EAC7BF,EAAU,GACbG,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,oCACjB,CAAO,EAEHJ,GACD,CACH,EAEAK,EAAU,wBAAyBH,CAAO,EAE1CX,EAAK,IAAI,iBAAiB,QAASe,GAAS,CAC1CN,IAEIC,EAAU,IACZV,EAAK,IAAI,SAAW,GACpBA,EAAK,cAAc,SAAW,GAC9Ba,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,iBACf,CAAK,EACDX,EAAgB,YAAY,IAAM,CAEhC,MAAMI,EAAYL,EADE,IAAI,KAExBI,EAAgBC,CAAS,EACrBA,EAAY,MACd,cAAcJ,CAAa,EAC3BG,EAAgB,CAAC,EACjBL,EAAK,IAAI,SAAW,GACpBA,EAAK,cAAc,SAAW,GAC9Ba,EAAS,QAAQ,CACf,MAAO,KACP,QAAS,cACnB,CAAS,EAEJ,EAAE,GAAI,EAEX,CAAC,EAED,SAASL,EAAUQ,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}